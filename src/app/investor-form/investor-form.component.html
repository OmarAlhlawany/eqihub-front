<h2 class="form-title">{{ 'INVESTOR_FORM.TITLE' | translate }}</h2>

<div class="investor-form-container">
  <form [formGroup]="investorForm" (ngSubmit)="onSubmit()" class="form-container">
    <!-- Step Indicator (Hidden on Step 5) -->
    <div *ngIf="currentStep !== 5" class="form-steps-indicator d-flex align-items-center mb-4">
      <div class="step-indicator">
        <span class="step-circle" [ngClass]="{'active': currentStep >= 1, 'unlocked': currentStep > 1}">1</span>
        <div class="step-line" [ngClass]="{'half-filled': currentStep === 1, 'fully-filled': currentStep > 1}"></div>
      </div>
      <div class="step-indicator">
        <span class="step-circle" [ngClass]="{'active': currentStep >= 2, 'unlocked': currentStep > 2}">2</span>
        <div class="step-line" [ngClass]="{'half-filled': currentStep === 2, 'fully-filled': currentStep > 2}"></div>
      </div>
      <div class="step-indicator">
        <span class="step-circle" [ngClass]="{'active': currentStep >= 3, 'unlocked': currentStep > 3}">3</span>
        <div class="step-line" [ngClass]="{'half-filled': currentStep === 3, 'fully-filled': currentStep > 3}"></div>
      </div>
      <div class="step-indicator">
        <span class="step-circle" [ngClass]="{'active': currentStep >= 4, 'unlocked': currentStep > 4}">4</span>
      </div>
      <!-- Step 5 Indicator (Only shown on Step 5) -->
      <div class="step-indicator" *ngIf="currentStep === 5">
        <span class="step-circle" [ngClass]="{'active': currentStep >= 5, 'unlocked': currentStep === 5}">5</span>
      </div>
    </div>

<!-- Step 1: Contact Details -->
<div *ngIf="currentStep === 1" class="form-step step-1">
  <h3>{{ 'INVESTOR_FORM.STEP_1.TITLE' | translate }}</h3>
  <p>{{ 'INVESTOR_FORM.STEP_1.DESCRIPTION' | translate }}</p>

  <div class="row mb-3">

    <div class="col-md-6">
      <label for="name">{{ 'INVESTOR_FORM.STEP_1.NAME' | translate }} *</label>
      <input id="name" formControlName="name" placeholder="{{ 'INVESTOR_FORM.STEP_1.NAME_PLACEHOLDER' | translate }}" class="form-control" required />
      <div *ngIf="investorForm.get('name')?.invalid && (investorForm.get('name')?.dirty || investorForm.get('name')?.touched)" class="text-danger">
        <div *ngIf="investorForm.get('name')?.errors?.['required']">{{ 'INVESTOR_FORM.STEP_1.NAME_REQUIRED' | translate }}</div>
        <div *ngIf="investorForm.get('name')?.errors?.['minlength']">{{ 'INVESTOR_FORM.STEP_1.NAME_MIN_LENGTH' | translate }}</div>
      </div>
    </div>

    <div class="col-md-6">
      <label for="email">{{ 'INVESTOR_FORM.STEP_1.EMAIL' | translate }} *</label>
      <input id="email" type="email" formControlName="email" placeholder="{{ 'INVESTOR_FORM.STEP_1.EMAIL_PLACEHOLDER' | translate }}" class="form-control" required />
      <div *ngIf="investorForm.get('email')?.invalid && (investorForm.get('email')?.dirty || investorForm.get('email')?.touched)" class="text-danger">
        <div *ngIf="investorForm.get('email')?.errors?.['required']">{{ 'INVESTOR_FORM.STEP_1.EMAIL_REQUIRED' | translate }}</div>
        <div *ngIf="investorForm.get('email')?.errors?.['email']">{{ 'INVESTOR_FORM.STEP_1.EMAIL_INVALID' | translate }}</div>
      </div>
    </div>
  
  </div>

  <div class="row mb-3">

    <div class="col-md-6">
      <label for="phoneNumber">{{ 'INVESTOR_FORM.STEP_1.PHONENUMBER' | translate }} *</label>
      <input id="phoneNumber" type="tel" formControlName="phoneNumber" placeholder="{{ 'INVESTOR_FORM.STEP_1.PHONENUMBER_PLACEHOLDER' | translate }}" class="form-control" required />
      <div *ngIf="investorForm.get('phoneNumber')?.invalid && (investorForm.get('phoneNumber')?.dirty || investorForm.get('phoneNumber')?.touched)" class="text-danger">
        <div *ngIf="investorForm.get('phoneNumber')?.errors?.['required']">{{ 'INVESTOR_FORM.STEP_1.PHONENUMBER_REQUIRED' | translate }}</div>
        <div *ngIf="investorForm.get('phoneNumber')?.errors?.['pattern']">{{ 'INVESTOR_FORM.STEP_1.PHONENUMBER_INVALID' | translate }}</div>
      </div>
    </div>

    <div class="col-md-6">
      <label for="company">{{ 'INVESTOR_FORM.STEP_1.COMPANY' | translate }} *</label>
      <input id="company" formControlName="company" placeholder="{{ 'INVESTOR_FORM.STEP_1.COMPANY_PLACEHOLDER' | translate }}" class="form-control" required />
      <div *ngIf="investorForm.get('company')?.invalid && (investorForm.get('company')?.dirty || investorForm.get('company')?.touched)" class="text-danger">
        <div *ngIf="investorForm.get('company')?.errors?.['required']">{{ 'INVESTOR_FORM.STEP_1.COMPANY_REQUIRED' | translate }}</div>
        <div *ngIf="investorForm.get('company')?.errors?.['minlength']">{{ 'INVESTOR_FORM.STEP_1.COMPANY_MIN_LENGTH' | translate }}</div>
      </div>
    </div>
  
  </div>
</div>


<!-- Step 2: Investment Details -->
<div *ngIf="currentStep === 2" class="form-step step-2">
  <div class="form-group">
    <label for="investment">{{ 'INVESTOR_FORM.STEP_2.INVESTMENT' | translate }} *</label>
    <select id="investment" formControlName="investment" required (change)="onInvestmentChange()">
      <option value="" disabled selected>{{ 'INVESTOR_FORM.STEP_2.SELECT_INVESTMENT' | translate }}</option>
      <option value="angel">{{ 'INVESTOR_FORM.STEP_2.ANGEL_INVESTMENT' | translate }}</option>
      <option value="funding">{{ 'INVESTOR_FORM.STEP_2.INVESTMENT_FUNDING' | translate }}</option>
    </select>
    <div *ngIf="investorForm.get('investment')?.invalid && (investorForm.get('investment')?.dirty || investorForm.get('investment')?.touched)" class="text-danger">
      <div *ngIf="investorForm.get('investment')?.errors?.['required']">{{ 'INVESTOR_FORM.STEP_2.INVESTMENT_REQUIRED' | translate }}</div>
    </div>
  </div>

  <div class="form-group">
    <label for="favoriteInvestment">{{ 'INVESTOR_FORM.STEP_2.FAVORITE_INVESTMENT' | translate }} *</label>
    <select id="favoriteInvestment" formControlName="favoriteInvestment" required (change)="onFavoriteInvestmentChange()">
      <option value="" disabled selected>{{ 'INVESTOR_FORM.STEP_2.SELECT_FAVORITE_INVESTMENT' | translate }}</option>
      <option value="preSeed">{{ 'INVESTOR_FORM.STEP_2.PRE_SEED' | translate }}</option>
      <option value="seed">{{ 'INVESTOR_FORM.STEP_2.SEED' | translate }}</option>
      <option value="preSeriesA">{{ 'INVESTOR_FORM.STEP_2.PRE_SERIES_A' | translate }}</option>
    </select>
    <div *ngIf="investorForm.get('favoriteInvestment')?.invalid && (investorForm.get('favoriteInvestment')?.dirty || investorForm.get('favoriteInvestment')?.touched)" class="text-danger">
      <div *ngIf="investorForm.get('favoriteInvestment')?.errors?.['required']">{{ 'INVESTOR_FORM.STEP_2.FAVORITE_INVESTMENT_REQUIRED' | translate }}</div>
    </div>
  </div>

  <!-- Selected Tags Display -->
  <div class="form-group">
    <label for="favoriteSectors">{{ 'INVESTOR_FORM.STEP_2.FAVORITE_SECTORS' | translate }} *</label>
    <div class="dropdown">
      <button type="button" class="dropdown-toggle" (click)="toggleDropdown()">
        {{ 'INVESTOR_FORM.STEP_2.SELECT_FAVORITE_SECTORS' | translate }}
      </button>
      <div class="dropdown-menu show" *ngIf="showDropdown">
        <span 
          class="dropdown-item"
          *ngFor="let tag of tags"
          (click)="toggleTag(tag)"
          [class.selected]="selectedTags.includes(tag)"
        >
          {{ tag | translate }}
        </span>
      </div>
    </div>
    <div class="tags-input" id="favoriteSectors">
      <span class="tag selected" *ngFor="let tag of selectedTags">
        {{ tag | translate }}
        <span class="tag-close" (click)="removeTag(tag)">Ã—</span>
      </span>
      <div *ngIf="investorForm.get('favoriteSectors')?.invalid && (investorForm.get('favoriteSectors')?.dirty || investorForm.get('favoriteSectors')?.touched)" class="text-danger">
        <div *ngIf="investorForm.get('favoriteSectors')?.errors?.['required']">{{ 'INVESTOR_FORM.STEP_2.FAVORITE_SECTORS_REQUIRED' | translate }}</div>
      </div>
    </div>
    
  </div>
</div>

<!-- Step 3: Project Budget -->
<div *ngIf="currentStep === 3" class="form-step step-3">
  <h3>{{ 'INVESTOR_FORM.STEP_3.PROJECT_BUDGET' | translate }}</h3>
  <div class="budget-options">
    <div class="custom-control custom-radio budget-option">
      <input
        type="radio"
        formControlName="projectBudget"
        value="$100M - $500M"
        class="custom-control-input"
        id="budget1"
        required
      />
      <label class="custom-control-label" for="budget1">{{ 'INVESTOR_FORM.STEP_3.BUDGET_1' | translate }}</label>
    </div>
    <div class="custom-control custom-radio budget-option">
      <input
        type="radio"
        formControlName="projectBudget"
        value="$10,000 - $20,000"
        class="custom-control-input"
        id="budget2"
        required
      />
      <label class="custom-control-label" for="budget2">{{ 'INVESTOR_FORM.STEP_3.BUDGET_2' | translate }}</label>
    </div>
    <div class="custom-control custom-radio budget-option">
      <input
        type="radio"
        formControlName="projectBudget"
        value="$20,000 - $50,000"
        class="custom-control-input"
        id="budget3"
        required
      />
      <label class="custom-control-label" for="budget3">{{ 'INVESTOR_FORM.STEP_3.BUDGET_3' | translate }}</label>
    </div>
    <div class="custom-control custom-radio budget-option">
      <input
        type="radio"
        formControlName="projectBudget"
        value="$50,000+"
        class="custom-control-input"
        id="budget4"
        required
      />
      <label class="custom-control-label" for="budget4">{{ 'INVESTOR_FORM.STEP_3.BUDGET_4' | translate }}</label>
    </div>
    <div
      class="custom-control custom-radio budget-option full-width"
      [class.selected]="investorForm.controls['projectBudget'].value === 'Other'"
    >
      <div class="other-budget-container">
        <label class="custom-control-label other-budget-label" for="budget5">
          <input
            type="radio"
            formControlName="projectBudget"
            value="Other"
            class="custom-control-input"
            id="budget5"
            required
          />
          {{ 'INVESTOR_FORM.STEP_3.OTHER' | translate }}
        </label>
        <input
          type="text"
          formControlName="otherBudget"
          placeholder="{{ 'INVESTOR_FORM.STEP_3.OTHER_PLACEHOLDER' | translate }}"
          class="form-control other-budget-input"
          *ngIf="investorForm.controls['projectBudget']?.value === 'Other'"
        />
      </div>
    </div>
  </div>
  <div *ngIf="investorForm.get('projectBudget')?.invalid && (investorForm.get('projectBudget')?.dirty || investorForm.get('projectBudget')?.touched)" class="text-danger">
    <div *ngIf="investorForm.get('projectBudget')?.errors?.['required']">{{ 'INVESTOR_FORM.STEP_3.PROJECT_BUDGET_REQUIRED' | translate }}</div>
  </div>
  <div *ngIf="investorForm.get('otherBudget')?.invalid && (investorForm.get('otherBudget')?.dirty || investorForm.get('otherBudget')?.touched)" class="text-danger">
    <div *ngIf="investorForm.get('otherBudget')?.errors?.['required']">{{ 'INVESTOR_FORM.STEP_3.OTHER_BUDGET_REQUIRED' | translate }}</div>

    <div *ngIf="investorForm.get('otherBudget')?.errors?.['pattern']">{{ 'INVESTOR_FORM.STEP_3.OTHER_INVALID' | translate }}</div>
  </div>
</div>



<!-- Step 4: Additional Information -->
<div *ngIf="currentStep === 4" class="form-step step-4">
<!-- Geographical Scope Dropdown -->
<div class="form-group">
  <label for="geographicalScope">
    {{ 'INVESTOR_FORM.STEP_4.GEOGRAPHICAL_SCOPE' | translate }} *
  </label>
  <select id="geographicalScope" formControlName="geographicalScope" class="form-control" required>
    <option value="" disabled selected>
      {{ 'INVESTOR_FORM.STEP_4.SELECT_GEOGRAPHICAL_SCOPE' | translate }}
    </option>
    <option value="region1">{{ 'INVESTOR_FORM.STEP_4.REGION_1' | translate }}</option>
    <option value="region2">{{ 'INVESTOR_FORM.STEP_4.REGION_2' | translate }}</option>
    <option value="region3">{{ 'INVESTOR_FORM.STEP_4.REGION_3' | translate }}</option>
  </select>
  <div *ngIf="investorForm.get('geographicalScope')?.invalid && (investorForm.get('geographicalScope')?.dirty || investorForm.get('geographicalScope')?.touched)" class="text-danger">
    <div *ngIf="investorForm.get('geographicalScope')?.errors?.['required']">{{ 'INVESTOR_FORM.STEP_4.GEOGRAPHICAL_SCOPE_REQUIRED' | translate }}</div>
  </div>
</div>

<!--  Co-Invest -->
<div class="form-group">
  <label>{{ 'INVESTOR_FORM.STEP_4.CO_INVEST' | translate }}</label>
  <div class="form-check-container">
    <div class="form-check">
      <input type="radio" formControlName="coInvest" value="yes" class="form-check-input" id="coInvestYes" />
      <label class="form-check-label" for="coInvestYes">{{ 'INVESTOR_FORM.STEP_4.CO_INVEST_YES' | translate }}</label>
    </div>
    <div class="form-check">
      <input type="radio" formControlName="coInvest" value="no" class="form-check-input" id="coInvestNo" />
      <label class="form-check-label" for="coInvestNo">{{ 'INVESTOR_FORM.STEP_4.CO_INVEST_NO' | translate }}</label>
    </div>
  </div>
  <div *ngIf="investorForm.get('coInvest')?.invalid && (investorForm.get('coInvest')?.dirty || investorForm.get('coInvest')?.touched)" class="text-danger">
    <div *ngIf="investorForm.get('coInvest')?.errors?.['required']">{{ 'INVESTOR_FORM.STEP_4.CO_INVEST_REQUIRED' | translate }}</div>
  </div>
</div>


<!-- Investment Privacy Dropdown -->
<div class="form-group">
  <label for="investmentPrivacy">
    {{ 'INVESTOR_FORM.STEP_4.INVESTMENT_PRIVACY' | translate }}
  </label>
  <select id="investmentPrivacy" formControlName="investmentPrivacy" class="form-control" required>
    <option value="" disabled selected>{{ 'INVESTOR_FORM.STEP_4.SELECT_INVESTMENT_PRIVACY' | translate }}</option>
    <option value="private">{{ 'INVESTOR_FORM.STEP_4.PRIVACY_PRIVATE' | translate }}</option>
    <option value="public">{{ 'INVESTOR_FORM.STEP_4.PRIVACY_PUBLIC' | translate }}</option>
  </select>
  <div *ngIf="investorForm.get('investmentPrivacy')?.invalid && (investorForm.get('investmentPrivacy')?.dirty || investorForm.get('investmentPrivacy')?.touched)" class="text-danger">
    <div *ngIf="investorForm.get('investmentPrivacy')?.errors?.['required']">{{ 'INVESTOR_FORM.STEP_4.INVESTMENT_PRIVACY_REQUIRED' | translate }}</div>
  </div>
  </div>

  <!--Additional Notes -->
  <div class="form-group">
    <label for="additionalNotes">{{ 'INVESTOR_FORM.STEP_4.ADDITIONAL_NOTES' | translate }}</label>
    <textarea id="additionalNotes" formControlName="additionalNotes" placeholder="{{ 'INVESTOR_FORM.STEP_4.ADDITIONAL_NOTES_PLACEHOLDER' | translate }}" class="form-control"></textarea>
  </div>

</div>



<!-- Step 5: Submit Step -->
<div *ngIf="currentStep === 5" class="form-step step-5">
  <div class="submit-box">
    <img src="../../assets/submit.png" alt="Submit Icon" class="submit-icon" />
    <h4 class="submit-title">{{ 'INVESTOR_FORM.STEP_5.SUBMIT_TITLE' | translate }}</h4>
    <p class="submit-description">
      {{ 'INVESTOR_FORM.STEP_5.SUBMIT_DESCRIPTION' | translate }}
    </p>
  </div>
  <div class="submit-button-container">
    <button type="submit" *ngIf="currentStep === 5" class="btn btn-success">{{ 'INVESTOR_FORM.STEP_5.SUBMIT_BUTTON' | translate }}</button>
  </div>
</div>

  </form>

<!-- Navigation Buttons -->
<div class="form-navigation" [ngClass]="{'multiple-buttons': currentStep !== 1}">
  <button type="button" (click)="prevStep()" [disabled]="currentStep === 1" class="btn btn-secondary" *ngIf="currentStep !== 1">
    {{ 'INVESTOR_FORM.NAVIGATION.PREVIOUS_STEP' | translate }}
  </button>
  <button type="button" (click)="nextStep()" class="btn btn-primary" *ngIf="currentStep !== 5">
    {{ 'INVESTOR_FORM.NAVIGATION.NEXT_STEP' | translate }}
  </button>

</div>

</div>